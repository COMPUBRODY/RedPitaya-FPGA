/*
 * TFT controller specific code
 */

&pinctrl0 {
	pinctrl_spi1_tft: spi1_tft {
		mux_spi {
			function = "spi1";
			groups = "spi1_0_grp";
		};
                mux_ss {
                	function = "spi1_ss";
                	groups   = "spi1_0_ss0_grp, spi1_3_ss1_grp";
                };

		conf_spi {
			pins = "MIO10", "MIO11", "MIO12";
			slew-rate = <1>;
			bias-disable;
			io-standard = <3>;  // LVCMOS33
		};
		conf_ss0 {
			pins = "MIO13"";
			slew-rate = \<0\>;
			bias-pull-up;
			io-standard = \<3\>;  // LVCMOS33
		};
		conf_ss {
			pins = "MIO50";
			slew-rate = \<0\>;
			bias-pull-up;
			io-standard = \<2\>;  // LVCMOS25
		};
	};
};

&spi1 {
	num-cs = <2>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_spi1_tft>;

	rpidisplay: rpi-display@0 {
		compatible = "ilitek,ili9341";
		reg = <0>;
		spi-max-frequency = <32000000>;

		rotate = <90>;
		bgr;
		fps = <10>;
		buswidth = <8>;

		reset-gpios = <&gpio0 70 0>;
		dc-gpios = <&gpio0 71 0>;

		debug = <0>;
	};

	rpidisplay_ts: rpi-display-ts@1 {
		compatible = "ti,ads7846";
		reg = <1>;
		spi-max-frequency = <1000000>;

		ti,swap-xy;
		interrupts = <72 0>;
		interrupt-parent = <&gpio0>;
		pendown-gpio = <&gpio0 72 0>;
		vcc-supply = <&fixedreg33>;
	};
};
/{
	backlight {
		compatible = "gpio-backlight";
		gpios = <&gpio0 63 0>;
		default-on;
	};

	fixedreg33: fixed33@0 {
		compatible = "regulator-fixed";
		regulator-name = "fixed-supply";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
	};
};
